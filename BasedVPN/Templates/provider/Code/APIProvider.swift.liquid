{% include 'Header' %}

import Foundation
import Alamofire

public final class {{ module_info.name }}Provider: SOLARAPIProvider {
    let configuration: ApplicationConfigurationType
    private let session: Session
    
    public init(configuration: ApplicationConfigurationType, tokenStorage: StoresToken) {
        self.configuration = configuration
        
        let sessionConfig = URLSessionConfiguration.default
        let interceptor = AuthorizedRequestInterceptor(tokenStorage: tokenStorage, types: CHOOSE_TYPES)
        
        self.session = Session(
            configuration: sessionConfig, interceptor: interceptor
        )
    }
}

// MARK: - {{ module_info.name }}ProviderType implementation

extension {{ module_info.name }}Provider: {{ module_info.name }}ProviderType {

}

// MARK: - Private

private extension {{ module_info.name }}Provider {
    func request(for target: {{ module_info.name }}APITarget) -> APIRequest {
        .init(baseURL: configuration.CHOOSE_URL, target: target)
    }
}

